
@{
    ViewBag.Title = "DistributorSet";
    Layout = "~/Views/Shared/_LayoutAgentV2.cshtml";
    var userPrice = ViewBag.userPrice as Dictionary<int, UserProductPrice>;
    var storeUser = ViewBag.storeUser as UserInfo;
}

@using QingFeng.Models
@model QingFeng.Models.ProductBase

<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="edit-model-label">代理商价格 - @(storeUser.UserName)</h4>
        </div>
        <form class="form-horizontal" role="form" id="price-set-form" method="post" action="http://www.qingfeng.com/price/setUserPrice?baseId=@(Model.BaseId)&userId=@(storeUser.UserId)">
            <div class="panel panel-info">
                <!-- Default panel contents -->
                <div class="panel-heading">基本资料</div>
                <div class="panel-body">
                    <label class="col-sm-2 control-label">商品名称：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control ptn" value="@Model.BaseName" disabled="disabled">
                    </div>
                    <label class="col-sm-2 control-label">商品货号：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control ptn" value="@Model.BaseNo" disabled="disabled">
                    </div>
                    <label class="col-sm-2 control-label">所属分类：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control ptn" value="@Model.CategoryId.ToString()" disabled="disabled">
                    </div>
                    <label class="col-sm-2 control-label">所属品牌：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control ptn" value="@Model.BaseId.ToString()" disabled="disabled">
                    </div>
                    <label class="col-sm-2 control-label">性别：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control ptn" value="@Model.SexId.ToString()" disabled="disabled">
                    </div>
                    <label class="col-sm-2 control-label">商品状态：</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control ptn" value="@(Model.Status == 0 ? "正常" : "已删除")" disabled="disabled">
                    </div>
                </div>
            </div>
            <div class="panel panel-info">
                <div class="panel-heading">供货价设置</div>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>颜色</th>
                            <th>市场价</th>
                            <th>最低价</th>
                            <th>供货价</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.SubProduct)
                        {
                            <tr>
                                <td>@item.ProductNo</td>
                                <td>@item.OriginalPrice</td>
                                <td>@item.ActualPrice</td>
                                <td><input type="text" class="cost_input" style="width: 90px;" pattern="^[0-9]+|[0-9]+\.[0-9]+$" title="请填写整数" name="cost_@item.ProductId" value="@(userPrice.ContainsKey(item.ProductId)?userPrice[item.ProductId].ActualPrice:item.ActualPrice)" placeholder="请填写最低售价" /></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="modal-footer" style="text-align:center;">
                <button type="submit" id="submitForm" class="btn btn-primary">保存</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </form>
    </div>
</div>
